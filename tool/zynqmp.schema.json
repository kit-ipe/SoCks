{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/zynqmp.schema.json",
  "title": "ZynqMP SoCks Project",
  "description": "Description of a ZynqMP SoCks project",
  "type": "object",
  "required": ["projectType", "externalTools", "blocks"],
  "additionalProperties": false,
  "properties": {
    "projectType": {
      "description": "The unique identifier of the project type",
      "type": "string",
      "const": "zynqmp"
    },
    "externalTools": {
      "type": "object",
      "required": ["vivado", "vitis", "make", "containerTool"],
      "additionalProperties": false,
      "properties": {
        "containerTool": {
          "description": "Container tool to be used [docker, podman]",
          "type": "string"
        },
        "make": {
          "type": "object",
          "required": ["maxBuildThreads"],
          "additionalProperties": false,
          "properties": {
            "maxBuildThreads": {
              "description": "Number of Makefile recipes to be execute simultaneously",
              "type": "number"
            }
          }
        },
        "vitis": {
          "type": "object",
          "required": ["path"],
          "additionalProperties": false,
          "properties": {
            "path": {
              "description": "Path to the AMD Vitis tool",
              "type": "string"
            }
          }
        },
        "vivado": {
          "type": "object",
          "required": ["path", "version", "license"],
          "additionalProperties": false,
          "properties": {
            "path": {
              "description": "Path to the AMD Vivado tool",
              "type": "string"
            },
            "version": {
              "description": "Version of the tool to use",
              "type": "number"
            },
            "license": {
              "description": "License file",
              "type": "string"
            }
          }
        }
      }
    },
    "blocks": {
      "type": "object",
      "required": ["vivado"],
      "additionalProperties": false,
      "properties": {
        "atf": {
          "type": "object",
          "required": ["source", "builder", "project", "container"],
          "additionalProperties": false,
          "properties": {
            "source": {
              "description": "Source for obtaining the block",
              "enum": ["local_build", "download", "pre-built"]
            },
            "builder": {
              "description": "Builder class to be used",
              "type": "string"
            },
            "project": {
              "type": "object",
              "required": ["sources"],
              "additionalProperties": false,
              "properties": {
                "sources": {
                  "description": "Git clone URL or path to the Vivado project",
                  "type": "string"
                },
                "branch": {
                  "description": "Git repository branch",
                  "type": "string"
                },
                "pre-built": {
                  "description": "URL or path to the pre-built files",
                  "type": "string"
                }
              }
            },
            "container": {
              "type": "object",
              "required": ["image"],
              "additionalProperties": false,
              "properties": {
                "image": {
                  "description": "Container image to build the block",
                  "type": "string"
                },
                "tag": {
                  "description": "Container image tag",
                  "type": "string"
                },
                "baseImages": {
                  "description": "List of base images that must be built before the image for this block is build. Earlier images in the list can serve as the basis for later images.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "devicetree": {
          "type": "object",
          "required": ["source", "builder", "project", "container"],
          "additionalProperties": false,
          "properties": {
            "source": {
              "description": "Source for obtaining the block",
              "enum": ["local_build", "download", "pre-built"]
            },
            "builder": {
              "description": "Builder class to be used",
              "type": "string"
            },
            "project": {
              "type": "object",
              "required": ["sources"],
              "additionalProperties": false,
              "properties": {
                "sources": {
                  "description": "Git clone URL or path to the Vivado project",
                  "type": "string"
                },
                "branch": {
                  "description": "Git repository branch",
                  "type": "string"
                },
                "pre-built": {
                  "description": "URL or path to the pre-built files",
                  "type": "string"
                }
              }
            },
            "container": {
              "type": "object",
              "required": ["image"],
              "additionalProperties": false,
              "properties": {
                "image": {
                  "description": "Container image to build the block",
                  "type": "string"
                },
                "tag": {
                  "description": "Container image tag",
                  "type": "string"
                },
                "baseImages": {
                  "description": "List of base images that must be built before the image for this block is build. Earlier images in the list can serve as the basis for later images.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "fsbl": {
          "type": "object",
          "required": ["source", "builder", "container"],
          "additionalProperties": false,
          "properties": {
            "source": {
              "description": "Source for obtaining the block",
              "enum": ["local_build", "download", "pre-built"]
            },
            "builder": {
              "description": "Builder class to be used",
              "type": "string"
            },
            "project": {
              "additionalProperties": false,
              "properties": {
                "pre-built": {
                  "description": "URL or path to the pre-built files",
                  "type": "string"
                }
              }
            },
            "container": {
              "type": "object",
              "required": ["image"],
              "additionalProperties": false,
              "properties": {
                "image": {
                  "description": "Container image to build the block",
                  "type": "string"
                },
                "tag": {
                  "description": "Container image tag",
                  "type": "string"
                },
                "baseImages": {
                  "description": "List of base images that must be built before the image for this block is build. Earlier images in the list can serve as the basis for later images.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "kernel": {
          "type": "object",
          "required": ["source", "builder", "project", "container"],
          "additionalProperties": false,
          "properties": {
            "source": {
              "description": "Source for obtaining the block",
              "enum": ["local_build", "download", "pre-built"]
            },
            "builder": {
              "description": "Builder class to be used",
              "type": "string"
            },
            "project": {
              "type": "object",
              "required": ["sources"],
              "additionalProperties": false,
              "properties": {
                "sources": {
                  "description": "Git clone URL or path to the Vivado project",
                  "type": "string"
                },
                "branch": {
                  "description": "Git repository branch",
                  "type": "string"
                },
                "pre-built": {
                  "description": "URL or path to the pre-built files",
                  "type": "string"
                }
              }
            },
            "container": {
              "type": "object",
              "required": ["image"],
              "additionalProperties": false,
              "properties": {
                "image": {
                  "description": "Container image to build the block",
                  "type": "string"
                },
                "tag": {
                  "description": "Container image tag",
                  "type": "string"
                },
                "baseImages": {
                  "description": "List of base images that must be built before the image for this block is build. Earlier images in the list can serve as the basis for later images.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "pmu-fw": {
          "type": "object",
          "required": ["source", "builder", "container"],
          "additionalProperties": false,
          "properties": {
            "source": {
              "description": "Source for obtaining the block",
              "enum": ["local_build", "download", "pre-built"]
            },
            "builder": {
              "description": "Builder class to be used",
              "type": "string"
            },
            "project": {
              "additionalProperties": false,
              "properties": {
                "pre-built": {
                  "description": "URL or path to the pre-built files",
                  "type": "string"
                }
              }
            },
            "container": {
              "type": "object",
              "required": ["image"],
              "additionalProperties": false,
              "properties": {
                "image": {
                  "description": "Container image to build the block",
                  "type": "string"
                },
                "tag": {
                  "description": "Container image tag",
                  "type": "string"
                },
                "baseImages": {
                  "description": "List of base images that must be built before the image for this block is build. Earlier images in the list can serve as the basis for later images.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "rootfs": {
          "type": "object",
          "required": ["source", "builder", "container"],
          "additionalProperties": false,
          "properties": {
            "source": {
              "description": "Source for obtaining the block",
              "enum": ["local_build", "download", "pre-built"]
            },
            "builder": {
              "description": "Builder class to be used",
              "type": "string"
            },
            "project": {
              "additionalProperties": false,
              "properties": {
                "pre-built": {
                  "description": "URL or path to the pre-built files",
                  "type": "string"
                }
              }
            },
            "container": {
              "type": "object",
              "required": ["image"],
              "additionalProperties": false,
              "properties": {
                "image": {
                  "description": "Container image to build the block",
                  "type": "string"
                },
                "tag": {
                  "description": "Container image tag",
                  "type": "string"
                },
                "baseImages": {
                  "description": "List of base images that must be built before the image for this block is build. Earlier images in the list can serve as the basis for later images.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "u-boot": {
          "type": "object",
          "required": ["source", "builder", "project", "container"],
          "additionalProperties": false,
          "properties": {
            "source": {
              "description": "Source for obtaining the block",
              "enum": ["local_build", "download", "pre-built"]
            },
            "builder": {
              "description": "Builder class to be used",
              "type": "string"
            },
            "project": {
              "type": "object",
              "required": ["sources"],
              "additionalProperties": false,
              "properties": {
                "sources": {
                  "description": "Git clone URL or path to the Vivado project",
                  "type": "string"
                },
                "branch": {
                  "description": "Git repository branch",
                  "type": "string"
                },
                "pre-built": {
                  "description": "URL or path to the pre-built files",
                  "type": "string"
                }
              }
            },
            "container": {
              "type": "object",
              "required": ["image"],
              "additionalProperties": false,
              "properties": {
                "image": {
                  "description": "Container image to build the block",
                  "type": "string"
                },
                "tag": {
                  "description": "Container image tag",
                  "type": "string"
                },
                "baseImages": {
                  "description": "List of base images that must be built before the image for this block is build. Earlier images in the list can serve as the basis for later images.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "vivado": {
          "type": "object",
          "required": ["source", "builder", "project", "container"],
          "additionalProperties": false,
          "properties": {
            "source": {
              "description": "Source for obtaining the block",
              "enum": ["local_build", "download", "pre-built"]
            },
            "builder": {
              "description": "Builder class to be used",
              "type": "string"
            },
            "project": {
              "type": "object",
              "required": ["sources"],
              "additionalProperties": false,
              "properties": {
                "sources": {
                  "description": "Git clone URL or path to the Vivado project",
                  "type": "string"
                },
                "branch": {
                  "description": "Git repository branch",
                  "type": "string"
                },
                "pre-built": {
                  "description": "URL or path to the pre-built files",
                  "type": "string"
                }
              }
            },
            "container": {
              "type": "object",
              "required": ["image"],
              "additionalProperties": false,
              "properties": {
                "image": {
                  "description": "Container image to build the block",
                  "type": "string"
                },
                "tag": {
                  "description": "Container image tag",
                  "type": "string"
                },
                "baseImages": {
                  "description": "List of base images that must be built before the image for this block is build. Earlier images in the list can serve as the basis for later images.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
