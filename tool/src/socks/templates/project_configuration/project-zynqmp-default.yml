---
import:
  - project-default.yml
project:
  type: "zynqmp"
externalTools:
  xilinx:
    # Property 'path' must be specified outside this default project configuration file
    # Property 'version' must be specified outside this default project configuration file
    # Property 'license' must be specified outside this default project configuration file
    maxThreadsVivado: 8
blocks:
  atf:
    source: "build"
    builder: "ZynqMP_AMD_ATF_Builder_Alma9"
    project:
      build-srcs:
        source: "https://github.com/Xilinx/arm-trusted-firmware.git"
        branch: "xilinx-v{{externalTools/xilinx/version}}"
      # If no 'import-src' property is specified, the block must be built locally
    container:
      image: "amd-atf-builder-alma9"
      tag: "xilinx-v{{externalTools/xilinx/version}}"
  devicetree:
    source: "build"
    builder: "ZynqMP_AMD_Devicetree_Builder_Alma9"
    project:
      build-srcs:
        source: "https://github.com/Xilinx/device-tree-xlnx.git"
        branch: "xilinx_v{{externalTools/xilinx/version}}"
      # If no 'import-src' property is specified, the block must be built locally
      dependencies:
        vivado: "temp/vivado/output/vivado.tar.gz"
    container:
      image: "amd-xilinx-tools-alma9"
      tag: "xilinx-v{{externalTools/xilinx/version}}"
  fsbl:
    source: "build"
    builder: "ZynqMP_AMD_FSBL_Builder_Alma9"
    project:
      # If no 'import-src' property is specified, the block must be built locally
      dependencies:
        vivado: "temp/vivado/output/vivado.tar.gz"
    container:
      image: "amd-xilinx-tools-alma9"
      tag: "xilinx-v{{externalTools/xilinx/version}}"
  kernel:
    source: "build"
    builder: "ZynqMP_AMD_Kernel_Builder_Alma9"
    project:
      build-srcs:
        source: "https://github.com/Xilinx/linux-xlnx.git"
        branch: "xilinx-v{{externalTools/xilinx/version}}"
      # If no 'import-src' property is specified, the block must be built locally
      add-build-info: false
    container:
      image: "kernel-builder-alma9"
      tag: "xilinx-v{{externalTools/xilinx/version}}"
  pmu-fw:
    source: "build"
    builder: "ZynqMP_AMD_PMUFW_Builder_Alma9"
    project:
      # If no 'import-src' property is specified, the block must be built locally
      dependencies:
        vivado: "temp/vivado/output/vivado.tar.gz"
    container:
      image: "amd-xilinx-tools-alma9"
      tag: "xilinx-v{{externalTools/xilinx/version}}"
  u-boot:
    source: "build"
    builder: "ZynqMP_AMD_UBoot_Builder_Alma9"
    project:
      build-srcs:
        source: "https://github.com/Xilinx/u-boot-xlnx.git"
        branch: "xilinx-v{{externalTools/xilinx/version}}"
      # If no 'import-src' property is specified, the block must be built locally
      add-build-info: false
      dependencies:
        atf: "temp/atf/output/atf.tar.gz"
    container:
      image: "u-boot-builder-alma9"
      tag: "xilinx-v{{externalTools/xilinx/version}}"
  vivado:
    source: "build"
    # Property 'builder' must be specified outside this default project configuration file
    project:
      # Property 'build-srcs' must be specified outside this default project configuration file
      # If no 'import-src' property is specified, the block must be built locally
    container:
      image: "amd-xilinx-tools-alma9"
      tag: "xilinx-v{{externalTools/xilinx/version}}"
  image:
    source: "build"
    builder: "ZynqMP_AMD_Image_Builder_Alma9"
    project:
      # If no 'import-src' property is specified, the block must be built locally
      dependencies:
        atf: "temp/atf/output/atf.tar.gz"
        devicetree: "temp/devicetree/output/devicetree.tar.gz"
        fsbl: "temp/fsbl/output/fsbl.tar.gz"
        kernel: "temp/kernel/output/kernel.tar.gz"
        pmu-fw: "temp/pmu-fw/output/pmu-fw.tar.gz"
        u-boot: "temp/u-boot/output/u-boot.tar.gz"
        vivado: "temp/vivado/output/vivado.tar.gz"
    container:
      image: "image-builder-alma9"
      tag: "xilinx-v{{externalTools/xilinx/version}}"