---
import:
  - project-default.yml
project:
  type: "ZynqMP"
external_tools:
  xilinx:
    # Property 'version' must be specified outside this default project configuration file
    max_threads_vivado: 8
blocks:
  atf:
    source: "build"
    builder: "ZynqMP_AMD_ATF_Builder"
    project:
      build_srcs:
        source: "https://github.com/Xilinx/arm-trusted-firmware.git"
        branch: "xilinx-v{{external_tools/xilinx/version}}"
      # If no 'import_src' property is specified, the block must be built locally
    container:
      image: "atf-builder-alma9"
      tag: "socks"
  devicetree:
    source: "build"
    builder: "ZynqMP_AMD_Devicetree_Builder"
    project:
      build_srcs:
        source: "https://github.com/Xilinx/device-tree-xlnx.git"
        branch: "xilinx_v{{external_tools/xilinx/version}}"
      # If no 'import_src' property is specified, the block must be built locally
      dependencies:
        vivado: "temp/vivado/output/vivado.tar.gz"
    container:
      image: "amd-xilinx-tools-alma8"
      tag: "socks"
  fsbl:
    source: "build"
    builder: "ZynqMP_AMD_FSBL_Builder"
    project:
      # If no 'import_src' property is specified, the block must be built locally
      dependencies:
        vivado: "temp/vivado/output/vivado.tar.gz"
    container:
      image: "amd-xilinx-tools-alma8"
      tag: "socks"
  kernel:
    source: "build"
    builder: "ZynqMP_AMD_Kernel_Builder"
    project:
      build_srcs:
        source: "https://github.com/Xilinx/linux-xlnx.git"
        branch: "xilinx-v{{external_tools/xilinx/version}}"
      # If no 'import_src' property is specified, the block must be built locally
      add_build_info: false
    container:
      image: "kernel-builder-alma9"
      tag: "socks"
  pmu_fw:
    source: "build"
    builder: "ZynqMP_AMD_PMUFW_Builder"
    project:
      # If no 'import_src' property is specified, the block must be built locally
      dependencies:
        vivado: "temp/vivado/output/vivado.tar.gz"
    container:
      image: "amd-xilinx-tools-alma8"
      tag: "socks"
  uboot:
    source: "build"
    builder: "ZynqMP_AMD_UBoot_Builder"
    project:
      build_srcs:
        source: "https://github.com/Xilinx/u-boot-xlnx.git"
        branch: "xilinx-v{{external_tools/xilinx/version}}"
      # If no 'import_src' property is specified, the block must be built locally
      add_build_info: false
      dependencies:
        atf: "temp/atf/output/atf.tar.gz"
    container:
      image: "kernel-builder-alma9"
      tag: "socks"
  vivado:
    source: "build"
    # Property 'builder' must be specified outside this default project configuration file
    project:
      # Property 'build_srcs' must be specified outside this default project configuration file
      # If no 'import_src' property is specified, the block must be built locally
    container:
      image: "amd-xilinx-tools-alma8"
      tag: "socks"
  image:
    source: "build"
    builder: "ZynqMP_AMD_Image_Builder"
    project:
      # If no 'import_src' property is specified, the block must be built locally
      dependencies:
        atf: "temp/atf/output/atf.tar.gz"
        devicetree: "temp/devicetree/output/devicetree.tar.gz"
        fsbl: "temp/fsbl/output/fsbl.tar.gz"
        kernel: "temp/kernel/output/kernel.tar.gz"
        pmu_fw: "temp/pmu_fw/output/pmu_fw.tar.gz"
        uboot: "temp/uboot/output/uboot.tar.gz"
        vivado: "temp/vivado/output/vivado.tar.gz"
    container:
      image: "amd-image-builder-alma9"
      tag: "socks"