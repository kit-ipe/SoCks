From 72b7c02d5dc6dec6a5258b50bcf6d98053a052a0 Mon Sep 17 00:00:00 2001
From: "marvin.fuchs" <marvin.fuchs@cern.ch>
Date: Fri, 13 Sep 2024 17:14:35 +0200
Subject: [PATCH] Add buildinfo recipe

---
 recipes-support/buildinfo/buildinfo.bb | 12 ++++++++++++
 1 file changed, 12 insertions(+)
 create mode 100644 recipes-support/buildinfo/buildinfo.bb

diff --git a/recipes-support/buildinfo/buildinfo.bb b/recipes-support/buildinfo/buildinfo.bb
new file mode 100644
index 0000000..62dd116
--- /dev/null
+++ b/recipes-support/buildinfo/buildinfo.bb
@@ -0,0 +1,16 @@
+DESCRIPTION = "Build information of the currently deployed filesystem"
+SECTION = "apps"
+LICENSE = "CLOSED"
+
+inherit allarch
+
+do_install() {
+  install -d ${D}${basedir}/etc
+  install -m 0444 ${TMPDIR}/../../fs_build_info ${D}${basedir}/etc/fs_build_info
+  rm ${TMPDIR}/../../fs_build_info
+}
+
+# Add nostamp flag to force do_install to run every time
+do_install[nostamp] = "1"
+
+FILES_${PN} += "${basedir}/etc/fs_build_info"
-- 
2.34.1

